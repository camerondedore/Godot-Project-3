[gd_scene load_steps=30 format=3 uid="uid://vic2gqv1xhp2"]

[ext_resource type="Script" path="res://C#/NpcMobile/NpcMobile.cs" id="1_164ud"]
[ext_resource type="PackedScene" uid="uid://dx2s20sg0k15w" path="res://Models/character-wynn.glb" id="1_jff1p"]
[ext_resource type="Material" uid="uid://bjcflxq43ap6e" path="res://Materials/Characters/CharacterWynnRim.tres" id="2_7jj0c"]
[ext_resource type="PackedScene" uid="uid://dabnky0qnlvgu" path="res://Prefabs/CharacterFootsteps.tscn" id="2_eyfap"]
[ext_resource type="Material" uid="uid://ciltja578e1dk" path="res://Materials/Characters/HareEye.tres" id="3_1ou5g"]
[ext_resource type="Material" uid="uid://byq34v3fjbgtb" path="res://Materials/Characters/Eyelash.tres" id="4_iaey1"]
[ext_resource type="PackedScene" uid="uid://cq0tn2qmf50ap" path="res://Prefabs/CharacterWaterArea.tscn" id="6_fyx4p"]
[ext_resource type="Script" path="res://C#/Common/AudioTools3d.cs" id="8_5tuos"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_4sxix"]
radius = 0.3

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_06cgn"]
animation = &"wynn-give"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ca10t"]
animation = &"wynn-idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lrc6m"]
animation = &"wynn-talk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0fjqx"]
animation = &"wynn-kitchen-chopping"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_ah7mo"]
filter_enabled = true
filters = ["character-armature/Skeleton3D:cheek-l", "character-armature/Skeleton3D:cheek-r", "character-armature/Skeleton3D:eye-lid-l", "character-armature/Skeleton3D:eye-lid-r", "character-armature/Skeleton3D:jaw"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_14mjy"]
graph_offset = Vector2(-323, -34)
nodes/Animation/node = SubResource("AnimationNodeAnimation_0fjqx")
nodes/Animation/position = Vector2(-120, 40)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_lrc6m")
"nodes/Animation 2/position" = Vector2(-100, 200)
nodes/Blend2/node = SubResource("AnimationNodeBlend2_ah7mo")
nodes/Blend2/position = Vector2(148, 100)
node_connections = [&"Blend2", 0, &"Animation", &"Blend2", 1, &"Animation 2", &"output", 0, &"Blend2"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_iar33"]
animation = &"wynn-talk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_l2lu1"]
animation = &"wynn-kitchen-stirring"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_5olyb"]
filter_enabled = true
filters = ["character-armature/Skeleton3D:cheek-l", "character-armature/Skeleton3D:cheek-r", "character-armature/Skeleton3D:eye-lid-l", "character-armature/Skeleton3D:eye-lid-r", "character-armature/Skeleton3D:jaw"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_ta382"]
nodes/Animation/node = SubResource("AnimationNodeAnimation_l2lu1")
nodes/Animation/position = Vector2(220, 100)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_iar33")
"nodes/Animation 2/position" = Vector2(240, 280)
nodes/Blend2/node = SubResource("AnimationNodeBlend2_5olyb")
nodes/Blend2/position = Vector2(520, 120)
nodes/output/position = Vector2(720, 180)
node_connections = [&"Blend2", 0, &"Animation", &"Blend2", 1, &"Animation 2", &"output", 0, &"Blend2"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_uswgu"]
animation = &"wynn-run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_vsxsh"]
animation = &"wynn-wave"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_cuhna"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_k2oau"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uyoau"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_g1sdl"]
xfade_time = 0.2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_1wbih"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_j75jc"]
xfade_time = 0.1

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_7l30x"]
states/Start/position = Vector2(123, 99)
states/wynn-give/node = SubResource("AnimationNodeAnimation_06cgn")
states/wynn-give/position = Vector2(528, 273)
states/wynn-idle/node = SubResource("AnimationNodeAnimation_ca10t")
states/wynn-idle/position = Vector2(258, 102)
states/wynn-kitchen-chopping/node = SubResource("AnimationNodeBlendTree_14mjy")
states/wynn-kitchen-chopping/position = Vector2(658, 95)
states/wynn-kitchen-stirring/node = SubResource("AnimationNodeBlendTree_ta382")
states/wynn-kitchen-stirring/position = Vector2(658, 203)
states/wynn-run/node = SubResource("AnimationNodeAnimation_uswgu")
states/wynn-run/position = Vector2(402, 95)
states/wynn-wave/node = SubResource("AnimationNodeAnimation_vsxsh")
states/wynn-wave/position = Vector2(673, 273)
transitions = ["wynn-run", "wynn-kitchen-chopping", SubResource("AnimationNodeStateMachineTransition_cuhna"), "wynn-run", "wynn-kitchen-stirring", SubResource("AnimationNodeStateMachineTransition_k2oau"), "Start", "wynn-idle", SubResource("AnimationNodeStateMachineTransition_uyoau"), "wynn-idle", "wynn-run", SubResource("AnimationNodeStateMachineTransition_g1sdl"), "wynn-kitchen-stirring", "wynn-run", SubResource("AnimationNodeStateMachineTransition_1wbih"), "wynn-kitchen-chopping", "wynn-run", SubResource("AnimationNodeStateMachineTransition_j75jc")]
graph_offset = Vector2(25, -10)

[sub_resource type="SphereShape3D" id="SphereShape3D_jrfpl"]
radius = 1.0

[node name="NpcMobileWynn" type="CharacterBody3D" node_paths=PackedStringArray("targets")]
collision_layer = 2
script = ExtResource("1_164ud")
targets = []

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_4sxix")

[node name="NavAgent" type="NavigationAgent3D" parent="."]
target_desired_distance = 0.5
avoidance_enabled = true
height = 1.5
neighbor_distance = 5.0
max_neighbors = 5
use_3d_avoidance = true

[node name="character-wynn2" parent="." instance=ExtResource("1_jff1p")]

[node name="Skeleton3D" parent="character-wynn2/character-armature" index="0"]
bones/0/position = Vector3(2.36131e-18, 0.156393, 0.228451)
bones/0/rotation = Quaternion(0.999812, 0.0056698, -0.000894525, -0.0185325)
bones/1/rotation = Quaternion(0.397844, 0.13016, -0.12081, 0.900102)
bones/2/rotation = Quaternion(-0.659561, -0.0728638, 0.041744, 0.746945)
bones/3/rotation = Quaternion(0.630014, -0.0168403, 0.0126206, 0.776299)
bones/4/rotation = Quaternion(0.379269, 0.0270775, 0.00983085, 0.924838)
bones/5/rotation = Quaternion(0.944642, 0.0067163, 0.00107686, 0.328031)
bones/6/rotation = Quaternion(0.126307, -1.92798e-06, -7.02738e-07, 0.991991)
bones/7/rotation = Quaternion(-0.00821843, -1.2046e-10, 4.5567e-09, 0.999966)
bones/8/rotation = Quaternion(-0.591971, 0.000213122, -0.000131901, 0.805959)
bones/9/position = Vector3(3.63813e-11, 0.137893, -0.0853964)
bones/9/rotation = Quaternion(-0.163722, -1.30082e-10, -1.38314e-11, 0.986507)
bones/10/position = Vector3(0.0699644, 0.19036, 0.0841363)
bones/10/rotation = Quaternion(0.0463607, 0.00376595, -0.1034, 0.993552)
bones/11/position = Vector3(0.0765538, 0.017639, 0.197476)
bones/11/rotation = Quaternion(0.782256, 0.164724, -0.036194, 0.599692)
bones/12/position = Vector3(0.0738241, 0.263714, -0.127745)
bones/15/rotation = Quaternion(-0.5, -0.5, 0.5, -0.5)
bones/16/position = Vector3(-0.0699644, 0.19036, 0.0841363)
bones/16/rotation = Quaternion(0.0463607, 0.00376595, -0.1034, 0.993552)
bones/17/position = Vector3(-0.0765538, 0.017639, 0.197476)
bones/17/rotation = Quaternion(0.782256, -0.164724, 0.0361941, 0.599692)
bones/18/position = Vector3(-0.0738241, 0.263714, -0.127745)
bones/21/rotation = Quaternion(-0.585708, -0.0183494, -0.594832, 0.550259)
bones/22/rotation = Quaternion(-0.526586, -0.687193, -0.0821126, 0.493691)
bones/23/rotation = Quaternion(0.427041, -0.0693537, 0.0957424, 0.896471)
bones/24/rotation = Quaternion(0.125558, 0.327465, -0.0816723, 0.932916)
bones/25/rotation = Quaternion(-0.284619, 0.0307835, 0.00210748, 0.958144)
bones/26/rotation = Quaternion(-0.586341, 0.0104854, 0.601931, 0.542009)
bones/27/rotation = Quaternion(-0.512681, 0.676831, 0.0831438, 0.521675)
bones/28/rotation = Quaternion(0.413609, 0.0698607, -0.0927309, 0.903022)
bones/29/rotation = Quaternion(0.048077, -0.330177, 0.0374214, 0.941951)
bones/30/rotation = Quaternion(-0.181084, -0.030833, 0.00117898, 0.982983)
bones/31/rotation = Quaternion(0.374349, -0.107238, 0.144953, 0.909589)
bones/32/rotation = Quaternion(-0.669208, 0.0729929, -0.0429344, 0.738234)
bones/33/rotation = Quaternion(0.638781, 0.0173433, -0.0136091, 0.769073)
bones/34/rotation = Quaternion(0.40531, -0.0320925, -0.039639, 0.912755)
bones/35/rotation = Quaternion(0.944347, 4.20101e-06, 7.6769e-06, -0.32895)
bones/36/rotation = Quaternion(0.0737874, 0.633564, -0.194133, 0.745295)
bones/37/rotation = Quaternion(-0.0140967, -0.706969, 0.165601, 0.687439)
bones/38/position = Vector3(0.275312, -0.954628, 0.0437046)
bones/38/rotation = Quaternion(-0.7044, -0.0437532, -0.0618088, 0.705752)
bones/39/position = Vector3(0.323822, -0.413752, -0.246517)
bones/40/position = Vector3(0.265409, 0.00498956, -0.112458)
bones/40/rotation = Quaternion(-0.948553, 0.0281868, -0.194275, 0.248413)
bones/41/position = Vector3(0.294563, 0.176257, -0.0462874)
bones/41/rotation = Quaternion(0.0407275, 0.704659, 0.705933, -0.0587899)
bones/42/position = Vector3(-0.288808, -0.954628, 0.10377)
bones/42/rotation = Quaternion(-0.706048, 0.0205952, 0.0386854, 0.706807)
bones/43/position = Vector3(-0.32303, -0.413752, -0.246517)
bones/44/position = Vector3(-0.265925, -0.00200817, -0.130892)
bones/44/rotation = Quaternion(-0.960828, -0.0513858, 0.20404, 0.180378)
bones/45/position = Vector3(-0.294563, 0.176257, -0.0462874)

[node name="character-wynn" parent="character-wynn2/character-armature/Skeleton3D" index="0"]
surface_material_override/0 = ExtResource("2_7jj0c")
surface_material_override/1 = ExtResource("3_1ou5g")
surface_material_override/2 = ExtResource("4_iaey1")

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../character-wynn2")
tree_root = SubResource("AnimationNodeStateMachine_7l30x")
anim_player = NodePath("../character-wynn2/AnimationPlayer")
parameters/wynn-kitchen-chopping/Blend2/blend_amount = 0.0
parameters/wynn-kitchen-stirring/Blend2/blend_amount = 0.0

[node name="CharacterFootsteps" parent="." instance=ExtResource("2_eyfap")]

[node name="CharacterWaterArea" parent="." node_paths=PackedStringArray("characterFeetAudioNode") instance=ExtResource("6_fyx4p")]
characterFeetAudioNode = NodePath("../CharacterFootsteps")

[node name="VoiceAudio" type="AudioStreamPlayer3D" parent="."]
unit_size = 20.0
max_distance = 50.0
attenuation_filter_cutoff_hz = 20500.0
script = ExtResource("8_5tuos")

[node name="TriggerArea" type="Area3D" parent="."]
collision_layer = 0
collision_mask = 128
monitorable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="TriggerArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.96046e-08, 0)
shape = SubResource("SphereShape3D_jrfpl")

[editable path="character-wynn2"]
