[gd_scene load_steps=18 format=3 uid="uid://dkw1hfkd0uses"]

[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRat.cs" id="1_46qau"]
[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRatHealth.cs" id="2_71lt1"]
[ext_resource type="PackedScene" uid="uid://b1euavai00lrc" path="res://Models/character-black-rat.glb" id="3_ikkoo"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobDetection.cs" id="3_rfqt5"]
[ext_resource type="Material" uid="uid://c568qsv5du0ld" path="res://Materials/WeaponSword.tres" id="4_5s7k5"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobFaction.cs" id="4_3600o"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobEyes.cs" id="4_yonai"]
[ext_resource type="Material" uid="uid://jdcotr5j1875" path="res://Materials/Characters/MobBlackRatRim.tres" id="5_n14mk"]
[ext_resource type="Material" uid="uid://dgvmcdcm511j4" path="res://Materials/Characters/RatEyeGlow.tres" id="6_ib6tv"]
[ext_resource type="Material" uid="uid://blq5nnks5d07c" path="res://Materials/Characters/MobBlackRatGearRim.tres" id="7_ji3gt"]
[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRatAudio.cs" id="8_cysva"]
[ext_resource type="AudioStream" uid="uid://cpx1ghr2ba1fu" path="res://Audio/footstep-1.wav" id="9_r652e"]
[ext_resource type="AudioStream" uid="uid://clv8pgaqyxaa3" path="res://Audio/footstep-2.wav" id="10_r6giy"]
[ext_resource type="AudioStream" uid="uid://14a2mxv3c4w5" path="res://Audio/footstep-3.wav" id="11_1mgdw"]
[ext_resource type="AudioStream" uid="uid://dbdeffyes45v6" path="res://Audio/footstep-4.wav" id="12_fuy8d"]
[ext_resource type="AudioStream" uid="uid://cnpdnvcc22gj7" path="res://Audio/footstep-5.wav" id="13_ofeey"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_3dud8"]
radius = 0.4

[node name="MobBlackRat" type="CharacterBody3D" node_paths=PackedStringArray("detection", "eyes", "navAgent", "health", "myFactions", "animation", "collider")]
collision_layer = 2
collision_mask = 2067
script = ExtResource("1_46qau")
detection = NodePath("Detection")
eyes = NodePath("Eyes")
navAgent = NodePath("NavigationAgent3D")
health = NodePath("Health")
myFactions = [NodePath("Faction"), NodePath("Faction2")]
animation = NodePath("character-black-rat/AnimationPlayer")
collider = NodePath("CollisionShape3D")
maxSightRangeSqr = 625.0
moveRecalculatePathRange = 0.5
attackRangeSqr = 2.25
speed = 5.5
lookSpeed = 0.3

[node name="Health" type="Node" parent="." node_paths=PackedStringArray("rat")]
script = ExtResource("2_71lt1")
rat = NodePath("..")
hitPoints = 50.0
maxHitPoints = 50.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_3dud8")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true
height = 1.5
neighbor_distance = 5.0
max_neighbors = 5

[node name="character-black-rat" parent="." instance=ExtResource("3_ikkoo")]

[node name="Skeleton3D" parent="character-black-rat/character-armature" index="0"]
bones/0/position = Vector3(2.75546e-10, 0.102422, 0.0485083)
bones/0/rotation = Quaternion(0.98521, 2.04271e-08, 1.17446e-07, 0.171355)
bones/0/scale = Vector3(1, 1, 1)
bones/1/rotation = Quaternion(0.996081, -1.26782e-09, 2.37619e-07, 0.088451)
bones/1/scale = Vector3(1, 1, 1)
bones/2/rotation = Quaternion(0.033744, -3.61203e-11, 9.28656e-09, 0.999431)
bones/3/rotation = Quaternion(0.0452641, 2.01228e-16, 1.07919e-08, 0.998975)
bones/4/rotation = Quaternion(-0.580024, 1.24509e-09, -1.40381e-07, 0.814599)
bones/5/rotation = Quaternion(-0.0137135, 1.10064e-15, -4.86247e-09, 0.999906)
bones/6/rotation = Quaternion(0.0156463, -1.19195e-07, 1.62073e-09, 0.999878)
bones/7/rotation = Quaternion(0.723278, 0.11345, -0.118348, 0.670815)
bones/8/rotation = Quaternion(-7.97953e-07, -9.72213e-07, -0.707107, 0.707107)
bones/9/rotation = Quaternion(-0.1691, -8.29064e-14, -4.03165e-08, 0.985599)
bones/10/rotation = Quaternion(0.707106, 2.66901e-08, 1.41897e-07, 0.707108)
bones/12/rotation = Quaternion(0.0156463, -1.19195e-07, 1.62073e-09, 0.999878)
bones/13/rotation = Quaternion(0.723277, -0.113451, 0.118348, 0.670815)
bones/14/rotation = Quaternion(-9.72213e-07, 7.97952e-07, 0.707107, 0.707107)
bones/15/rotation = Quaternion(0.707106, -1.41897e-07, -2.669e-08, 0.707108)
bones/17/rotation = Quaternion(-0.714824, -0.308756, -0.308704, 0.546258)
bones/17/scale = Vector3(1, 1, 1)
bones/18/rotation = Quaternion(-0.45028, -0.49094, 0.292316, 0.686132)
bones/19/rotation = Quaternion(0.425017, 0.0162825, 0.0425616, 0.904038)
bones/20/rotation = Quaternion(0.089173, 0.369206, -0.300808, 0.874785)
bones/21/rotation = Quaternion(-0.565019, -0.0952566, 0.0444092, 0.818356)
bones/21/scale = Vector3(1, 1, 1)
bones/22/rotation = Quaternion(-0.656635, 0.0955871, 0.0284209, 0.747587)
bones/23/rotation = Quaternion(-0.593688, -0.0594035, 0.0271477, 0.802041)
bones/23/scale = Vector3(1, 1, 1)
bones/24/rotation = Quaternion(-0.704035, 0.130149, 0.0421473, 0.696864)
bones/24/scale = Vector3(1, 1, 1)
bones/25/rotation = Quaternion(-0.581285, -0.0179243, -0.0077121, 0.813466)
bones/26/rotation = Quaternion(-0.729107, 0.0885577, 0.0346626, 0.67776)
bones/26/scale = Vector3(1, 1, 1)
bones/27/rotation = Quaternion(-0.669637, 0.0139277, 0.0233766, 0.74219)
bones/27/scale = Vector3(1, 1, 1)
bones/28/rotation = Quaternion(-0.714824, 0.308756, 0.308704, 0.546258)
bones/29/rotation = Quaternion(-0.443431, 0.407069, -0.276938, 0.748979)
bones/29/scale = Vector3(1, 1, 1)
bones/30/rotation = Quaternion(0.414052, -0.0163749, -0.0414636, 0.909161)
bones/31/rotation = Quaternion(-0.165446, -0.50165, 0.0745396, 0.845824)
bones/32/rotation = Quaternion(0.0549577, 0.0263517, -0.0249544, 0.997829)
bones/32/scale = Vector3(1, 1, 1)
bones/33/rotation = Quaternion(-0.234462, -0.0978551, 0.0192093, 0.966997)
bones/33/scale = Vector3(1, 1, 1)
bones/34/rotation = Quaternion(0.108884, 0.018972, -0.0274656, 0.993494)
bones/34/scale = Vector3(1, 1, 1)
bones/35/rotation = Quaternion(-0.387337, -0.136413, 0.0103331, 0.911732)
bones/35/scale = Vector3(1, 1, 1)
bones/36/rotation = Quaternion(0.115739, 0.0185066, -0.00654388, 0.993086)
bones/37/rotation = Quaternion(-0.555, -0.0941344, -0.0135161, 0.826396)
bones/38/rotation = Quaternion(-0.161551, 0.0280879, 0.00212822, 0.986462)
bones/39/rotation = Quaternion(-0.182259, 0.0263706, 0.0153727, 0.982777)
bones/40/rotation = Quaternion(-0.228249, 0.00917611, 0.0124148, 0.97348)
bones/41/rotation = Quaternion(-0.218318, -0.0103539, -0.0351172, 0.975191)
bones/42/rotation = Quaternion(-0.102097, 0.000609071, -0.0577097, 0.993099)
bones/43/rotation = Quaternion(0.514355, 0.0807465, -0.150977, 0.840312)
bones/44/rotation = Quaternion(-0.611937, -0.052401, 0.0490519, 0.787643)
bones/45/rotation = Quaternion(0.553916, -0.00944983, -0.0277518, 0.832056)
bones/46/rotation = Quaternion(0.455359, 0.13052, 0.0270579, 0.880273)
bones/46/scale = Vector3(1, 1, 1)
bones/47/rotation = Quaternion(0.550924, -0.103514, 0.130995, 0.817684)
bones/48/rotation = Quaternion(-0.613785, 0.0523568, -0.0492423, 0.786195)
bones/48/scale = Vector3(1, 1, 1)
bones/49/rotation = Quaternion(0.555171, 0.00948055, 0.0277542, 0.831219)
bones/50/rotation = Quaternion(0.417139, -0.109626, -0.0103999, 0.902147)
bones/50/scale = Vector3(1, 1, 1)
bones/51/rotation = Quaternion(-0.36992, -0.335747, -0.253115, 0.828472)
bones/51/scale = Vector3(1, 1, 1)
bones/52/rotation = Quaternion(0.0925098, -0.858216, 0.0551816, 0.501858)
bones/52/scale = Vector3(1, 1, 1)
bones/53/position = Vector3(0.368862, -0.954628, 0.093726)
bones/53/rotation = Quaternion(-0.703957, -0.0486215, -0.0666674, 0.705433)
bones/54/position = Vector3(0.308133, -0.41318, -0.241521)
bones/54/rotation = Quaternion(-0.706378, -0.0139991, -0.0320956, 0.706968)
bones/54/scale = Vector3(1, 1, 1)
bones/55/position = Vector3(0.276969, -0.0853529, -0.284526)
bones/55/rotation = Quaternion(-0.90286, -0.175207, -0.257318, 0.296536)
bones/55/scale = Vector3(1, 1, 1)
bones/56/position = Vector3(0.360523, 0.266875, -0.082472)
bones/56/rotation = Quaternion(0.0407275, 0.704659, 0.705933, -0.0587899)
bones/56/scale = Vector3(0.999999, 1, 1)
bones/57/position = Vector3(0.304515, -0.172873, -0.28633)
bones/57/rotation = Quaternion(-0.872915, -0.119464, 0.47163, -0.0362451)
bones/58/rotation = Quaternion(0.707107, 5.9269e-09, 1.38294e-08, 0.707107)
bones/59/position = Vector3(-0.341163, -0.954628, 0.0295805)
bones/59/rotation = Quaternion(-0.702306, 0.0642493, 0.082258, 0.704182)
bones/60/position = Vector3(-0.310987, -0.395981, -0.249902)
bones/60/rotation = Quaternion(-0.706378, 0.0139991, 0.0320956, 0.706968)
bones/60/scale = Vector3(1, 1, 1)
bones/61/position = Vector3(-0.304378, -0.0805132, -0.350027)
bones/61/rotation = Quaternion(0.908696, 0.0235767, -0.41221, -0.0616407)
bones/61/scale = Vector3(1, 1, 1)
bones/62/position = Vector3(-0.340017, 0.26845, -0.0867287)
bones/62/rotation = Quaternion(-0.0407275, 0.704659, 0.705933, 0.0587899)
bones/62/scale = Vector3(0.999999, 1, 1)

[node name="weapon-sword" parent="character-black-rat/character-armature/Skeleton3D" index="0"]
transform = Transform3D(0.526587, -0.814725, -0.242752, 0.174375, -0.175963, 0.968829, -0.832045, -0.552503, 0.0494076, 0.304515, -0.172873, -0.28633)

[node name="weapon-sword" parent="character-black-rat/character-armature/Skeleton3D/weapon-sword" index="0"]
surface_material_override/0 = ExtResource("4_5s7k5")

[node name="character-black-rat" parent="character-black-rat/character-armature/Skeleton3D" index="1"]
surface_material_override/0 = ExtResource("5_n14mk")
surface_material_override/1 = ExtResource("6_ib6tv")
surface_material_override/2 = ExtResource("7_ji3gt")

[node name="AnimationPlayer" parent="character-black-rat" index="1"]
playback_default_blend_time = 0.1

[node name="RatAudio" type="AudioStreamPlayer3D" parent="."]
max_distance = 30.0
script = ExtResource("8_cysva")
footsteps = Array[AudioStream]([ExtResource("9_r652e"), ExtResource("10_r6giy"), ExtResource("11_1mgdw"), ExtResource("12_fuy8d"), ExtResource("13_ofeey")])

[node name="Detection" type="RayCast3D" parent="." node_paths=PackedStringArray("myFaction")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 1555
script = ExtResource("3_rfqt5")
myFaction = NodePath("../Faction")
pointBlankRangeSqr = 2.0

[node name="Eyes" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 1555
script = ExtResource("4_yonai")

[node name="Faction" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, 0)
script = ExtResource("4_3600o")
faction = 2

[node name="Faction2" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0)
script = ExtResource("4_3600o")
faction = 2

[editable path="character-black-rat"]
