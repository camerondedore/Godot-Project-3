[gd_scene load_steps=19 format=3 uid="uid://dkw1hfkd0uses"]

[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRat.cs" id="1_46qau"]
[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRatHealth.cs" id="2_71lt1"]
[ext_resource type="PackedScene" uid="uid://b1euavai00lrc" path="res://Models/character-black-rat.glb" id="3_ikkoo"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobDetection.cs" id="3_rfqt5"]
[ext_resource type="Material" uid="uid://c568qsv5du0ld" path="res://Materials/WeaponSword.tres" id="4_5s7k5"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobFaction.cs" id="4_3600o"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobEyes.cs" id="4_yonai"]
[ext_resource type="Material" uid="uid://jdcotr5j1875" path="res://Materials/Characters/MobBlackRatRim.tres" id="5_n14mk"]
[ext_resource type="Material" uid="uid://bf425q6a5ouef" path="res://Materials/Characters/RatEyeGlow.tres" id="6_al5mj"]
[ext_resource type="Material" uid="uid://blq5nnks5d07c" path="res://Materials/Characters/MobBlackRatGearRim.tres" id="7_ji3gt"]
[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRatAudio.cs" id="8_cysva"]
[ext_resource type="AudioStream" uid="uid://bqg506y5rdo3g" path="res://Audio/blade-cut-1.wav" id="14_wtk1r"]
[ext_resource type="AudioStream" uid="uid://ch1you6rwmx40" path="res://Audio/bow-target.wav" id="15_xmgge"]
[ext_resource type="PackedScene" uid="uid://dabnky0qnlvgu" path="res://Prefabs/CharacterFootsteps.tscn" id="16_rmund"]
[ext_resource type="PackedScene" uid="uid://dqqxr6lpg1jk6" path="res://Prefabs/FX/FxEnemyHit.tscn" id="17_w0mqh"]
[ext_resource type="PackedScene" uid="uid://myloy3htblvq" path="res://Prefabs/FX/FxBloodSlash.tscn" id="20_3wa7t"]
[ext_resource type="PackedScene" uid="uid://cq0tn2qmf50ap" path="res://Prefabs/CharacterWaterArea.tscn" id="21_ccxk3"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_3dud8"]
radius = 0.4

[node name="MobBlackRat" type="CharacterBody3D" node_paths=PackedStringArray("detection", "eyes", "navAgent", "health", "myFactions", "animation", "audio", "swordHitFx", "swordHitBloodFx", "collider")]
collision_layer = 2
collision_mask = 2067
script = ExtResource("1_46qau")
detection = NodePath("Detection")
eyes = NodePath("Eyes")
navAgent = NodePath("NavigationAgent3D")
health = NodePath("Health")
myFactions = [NodePath("Faction"), NodePath("Faction2")]
animation = NodePath("character-black-rat/AnimationPlayer")
audio = NodePath("RatAudio")
swordHitFx = NodePath("FxEnemyHit")
swordHitBloodFx = NodePath("FxBloodSlash")
collider = NodePath("CollisionShape3D")
attackRangeSqr = 6.25

[node name="Health" type="Node" parent="." node_paths=PackedStringArray("rat")]
script = ExtResource("2_71lt1")
rat = NodePath("..")
hitPoints = 50.0
maxHitPoints = 50.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_3dud8")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true
height = 1.5
neighbor_distance = 5.0
max_neighbors = 5

[node name="character-black-rat" parent="." instance=ExtResource("3_ikkoo")]

[node name="Skeleton3D" parent="character-black-rat/character-armature" index="0"]
bones/0/position = Vector3(2.32631e-09, 0.0722138, 0.0538357)
bones/0/rotation = Quaternion(0.981708, -0.0164698, -0.00318162, 0.189652)
bones/0/scale = Vector3(1, 1, 1)
bones/1/rotation = Quaternion(0.987039, 0.0341632, 0.0204509, 0.155463)
bones/1/scale = Vector3(1, 1, 1)
bones/2/rotation = Quaternion(-0.0356793, 2.71512e-09, -1.07715e-08, 0.999363)
bones/3/rotation = Quaternion(0.0326506, -3.10916e-09, 8.7989e-09, 0.999467)
bones/4/rotation = Quaternion(-0.558863, -0.054439, 0.0153854, 0.827328)
bones/5/rotation = Quaternion(-0.0422701, 4.86642e-11, -3.05125e-09, 0.999106)
bones/6/rotation = Quaternion(0.158118, -1.1771e-07, 1.83235e-08, 0.98742)
bones/7/rotation = Quaternion(0.753846, 0.0119027, -0.209808, 0.622539)
bones/8/position = Vector3(0.11329, 0.295535, -0.0750512)
bones/8/rotation = Quaternion(-7.97953e-07, -9.72213e-07, -0.707107, 0.707107)
bones/9/rotation = Quaternion(-0.1691, -8.29064e-14, -4.03165e-08, 0.985599)
bones/10/rotation = Quaternion(0.707106, 2.66901e-08, 1.41897e-07, 0.707108)
bones/12/rotation = Quaternion(0.158118, -1.1771e-07, 1.83235e-08, 0.98742)
bones/13/rotation = Quaternion(0.753846, -0.0119028, 0.209809, 0.62254)
bones/14/position = Vector3(-0.11329, 0.295535, -0.0750512)
bones/14/rotation = Quaternion(-9.72213e-07, 7.97952e-07, 0.707107, 0.707107)
bones/15/rotation = Quaternion(0.707106, -1.41897e-07, -2.669e-08, 0.707108)
bones/17/rotation = Quaternion(-0.5889, -0.43068, -0.354134, 0.585065)
bones/17/scale = Vector3(1, 1, 1)
bones/18/rotation = Quaternion(-0.5537, -0.441269, 0.217832, 0.671749)
bones/19/rotation = Quaternion(0.819048, 0.0102255, 0.0820203, 0.56774)
bones/20/rotation = Quaternion(0.0740607, 0.722157, -0.286919, 0.625046)
bones/21/rotation = Quaternion(-0.565019, -0.0952566, 0.0444092, 0.818356)
bones/21/scale = Vector3(1, 1, 1)
bones/22/rotation = Quaternion(-0.656635, 0.0955871, 0.0284209, 0.747587)
bones/23/rotation = Quaternion(-0.593688, -0.0594035, 0.0271477, 0.802041)
bones/23/scale = Vector3(1, 1, 1)
bones/24/rotation = Quaternion(-0.704035, 0.130149, 0.0421473, 0.696864)
bones/24/scale = Vector3(1, 1, 1)
bones/25/rotation = Quaternion(-0.581285, -0.0179243, -0.00771211, 0.813466)
bones/26/rotation = Quaternion(-0.729107, 0.0885576, 0.0346627, 0.67776)
bones/26/scale = Vector3(1, 1, 1)
bones/27/rotation = Quaternion(-0.669637, 0.0139277, 0.0233766, 0.74219)
bones/27/scale = Vector3(1, 1, 1)
bones/28/rotation = Quaternion(-0.684383, 0.326127, 0.297722, 0.580193)
bones/29/rotation = Quaternion(-0.305225, 0.261467, -0.231872, 0.885837)
bones/29/scale = Vector3(1, 1, 1)
bones/30/rotation = Quaternion(0.735451, -0.0121295, -0.0736489, 0.673454)
bones/31/rotation = Quaternion(0.252187, -0.583832, 0.0733301, 0.768222)
bones/32/rotation = Quaternion(-0.383089, 0.0345652, -0.0110623, 0.922998)
bones/32/scale = Vector3(1, 1, 1)
bones/33/rotation = Quaternion(-0.635765, -0.0963345, -0.0257736, 0.765414)
bones/33/scale = Vector3(1, 1, 1)
bones/34/rotation = Quaternion(-0.52052, 0.0317965, -0.0101624, 0.853197)
bones/34/scale = Vector3(1, 1, 1)
bones/35/rotation = Quaternion(-0.63781, -0.13344, -0.0301482, 0.757947)
bones/35/scale = Vector3(1, 1, 1)
bones/36/rotation = Quaternion(-0.537749, 0.0184792, 0.00662077, 0.842876)
bones/37/rotation = Quaternion(-0.709444, -0.0895119, -0.0321183, 0.698317)
bones/38/rotation = Quaternion(-0.607355, 0.0237706, 0.0151134, 0.793931)
bones/39/rotation = Quaternion(-0.468122, 0.0128163, -0.0108219, 0.883505)
bones/40/rotation = Quaternion(-0.283356, -1.24962e-08, 1.15963e-07, 0.959015)
bones/41/rotation = Quaternion(-0.194929, -9.29426e-07, 3.41293e-07, 0.980817)
bones/42/rotation = Quaternion(-0.252947, 9.14763e-07, 2.81936e-07, 0.96748)
bones/43/rotation = Quaternion(0.655036, 0.176618, 0.0508195, 0.732906)
bones/44/rotation = Quaternion(-0.49355, -0.0547704, 0.0372343, 0.867192)
bones/45/rotation = Quaternion(0.47294, -0.00774198, -0.0270285, 0.880646)
bones/46/rotation = Quaternion(0.291311, -0.0799854, -0.0310347, 0.952774)
bones/46/scale = Vector3(1, 1, 1)
bones/47/rotation = Quaternion(0.254132, -0.0367025, 0.043207, 0.965507)
bones/48/rotation = Quaternion(-0.76593, 0.0477077, -0.0656069, 0.637786)
bones/48/scale = Vector3(1, 1, 1)
bones/49/rotation = Quaternion(0.661265, 0.0125763, 0.0270807, 0.749558)
bones/50/rotation = Quaternion(-0.163648, 0.0235789, 0.0531116, 0.984806)
bones/50/scale = Vector3(1, 1, 1)
bones/51/rotation = Quaternion(-0.465912, -0.303229, -0.291283, 0.778545)
bones/51/scale = Vector3(1, 1, 1)
bones/52/position = Vector3(-0.282029, 0.171989, -0.024547)
bones/52/rotation = Quaternion(0.147257, -0.84654, 0.131529, 0.494353)
bones/52/scale = Vector3(1, 1, 1)
bones/53/position = Vector3(0.106712, -0.948126, -0.301724)
bones/53/rotation = Quaternion(-0.689667, -0.0623624, -0.0808403, 0.716893)
bones/54/position = Vector3(0.270977, -0.489889, -0.426274)
bones/54/rotation = Quaternion(-0.706378, -0.0139991, -0.0320956, 0.706968)
bones/54/scale = Vector3(1, 1, 1)
bones/55/position = Vector3(0.380606, 0.0632619, -0.451942)
bones/55/rotation = Quaternion(-0.583271, 0.115513, -0.68059, 0.428076)
bones/55/scale = Vector3(1, 1, 1)
bones/56/position = Vector3(0.465082, 0.362178, 0.178744)
bones/56/rotation = Quaternion(0.0407275, 0.704659, 0.705933, -0.0587899)
bones/56/scale = Vector3(0.999999, 1, 1)
bones/57/position = Vector3(0.378074, -0.00539158, -0.512782)
bones/57/rotation = Quaternion(-0.921953, 0.00558812, 0.0387836, 0.385316)
bones/58/rotation = Quaternion(0.707107, 2.63418e-09, 2.63418e-09, 0.707107)
bones/59/position = Vector3(-0.193601, -0.67752, 0.60265)
bones/59/rotation = Quaternion(-0.968475, 0.0392373, -0.0196235, -0.245217)
bones/60/position = Vector3(-0.259708, -0.724331, -0.195154)
bones/60/rotation = Quaternion(-0.706378, 0.0139991, 0.0320956, 0.706968)
bones/60/scale = Vector3(1, 1, 1)
bones/61/position = Vector3(-0.308322, 0.139972, -0.65514)
bones/61/rotation = Quaternion(0.494526, 0.310059, -0.314053, -0.748784)
bones/61/scale = Vector3(1, 1, 1)
bones/62/position = Vector3(-0.405073, 0.246563, 0.181184)
bones/62/rotation = Quaternion(-0.0407275, 0.704659, 0.705933, 0.0587899)
bones/62/scale = Vector3(0.999999, 1, 1)

[node name="weapon-sword" parent="character-black-rat/character-armature/Skeleton3D" index="0"]
transform = Transform3D(0.996929, -0.0672069, 0.0401918, 0.0195839, 0.710919, 0.703001, -0.0758196, -0.700055, 0.710052, 0.378074, -0.00539153, -0.512782)

[node name="weapon-sword" parent="character-black-rat/character-armature/Skeleton3D/weapon-sword" index="0"]
surface_material_override/0 = ExtResource("4_5s7k5")

[node name="character-black-rat" parent="character-black-rat/character-armature/Skeleton3D" index="1"]
surface_material_override/0 = ExtResource("5_n14mk")
surface_material_override/1 = ExtResource("6_al5mj")
surface_material_override/2 = ExtResource("7_ji3gt")

[node name="AnimationPlayer" parent="character-black-rat" index="1"]
process_mode = 1
playback_default_blend_time = 0.1

[node name="RatAudio" type="AudioStreamPlayer3D" parent="."]
unit_size = 2.0
max_distance = 30.0
attenuation_filter_cutoff_hz = 20500.0
script = ExtResource("8_cysva")
swordHitSound = ExtResource("14_wtk1r")
swordSwingSound = ExtResource("15_xmgge")

[node name="CharacterFootsteps" parent="." instance=ExtResource("16_rmund")]

[node name="CharacterWaterArea" parent="." node_paths=PackedStringArray("characterFeetAudioNode") instance=ExtResource("21_ccxk3")]
characterFeetAudioNode = NodePath("../CharacterFootsteps")

[node name="Detection" type="RayCast3D" parent="." node_paths=PackedStringArray("myFaction")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 1555
script = ExtResource("3_rfqt5")
myFaction = NodePath("../Faction")
pointBlankRangeSqr = 2.0

[node name="Eyes" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 1555
script = ExtResource("4_yonai")

[node name="Faction" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, 0)
script = ExtResource("4_3600o")
faction = 2

[node name="Faction2" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0)
script = ExtResource("4_3600o")
faction = 2

[node name="FxEnemyHit" parent="." instance=ExtResource("17_w0mqh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.347548, -1.01184)
restartOnReady = false

[node name="FxBloodSlash" parent="." instance=ExtResource("20_3wa7t")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.347548, -1.21184)

[editable path="character-black-rat"]
