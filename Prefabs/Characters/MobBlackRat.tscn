[gd_scene load_steps=22 format=3 uid="uid://dkw1hfkd0uses"]

[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRat.cs" id="1_46qau"]
[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRatHealth.cs" id="2_71lt1"]
[ext_resource type="PackedScene" uid="uid://b1euavai00lrc" path="res://Models/character-black-rat.glb" id="3_ikkoo"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobDetection.cs" id="3_rfqt5"]
[ext_resource type="Material" uid="uid://c568qsv5du0ld" path="res://Materials/WeaponSword.tres" id="4_5s7k5"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobFaction.cs" id="4_3600o"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobEyes.cs" id="4_yonai"]
[ext_resource type="Material" uid="uid://jdcotr5j1875" path="res://Materials/Characters/MobBlackRatRim.tres" id="5_n14mk"]
[ext_resource type="Material" uid="uid://dgvmcdcm511j4" path="res://Materials/Characters/RatEyeGlow.tres" id="6_ib6tv"]
[ext_resource type="Material" uid="uid://blq5nnks5d07c" path="res://Materials/Characters/MobBlackRatGearRim.tres" id="7_ji3gt"]
[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRatAudio.cs" id="8_cysva"]
[ext_resource type="AudioStream" uid="uid://cpx1ghr2ba1fu" path="res://Audio/footstep-1.wav" id="9_r652e"]
[ext_resource type="AudioStream" uid="uid://clv8pgaqyxaa3" path="res://Audio/footstep-2.wav" id="10_r6giy"]
[ext_resource type="AudioStream" uid="uid://14a2mxv3c4w5" path="res://Audio/footstep-3.wav" id="11_1mgdw"]
[ext_resource type="AudioStream" uid="uid://dbdeffyes45v6" path="res://Audio/footstep-4.wav" id="12_fuy8d"]
[ext_resource type="AudioStream" uid="uid://cnpdnvcc22gj7" path="res://Audio/footstep-5.wav" id="13_ofeey"]
[ext_resource type="AudioStream" uid="uid://bqg506y5rdo3g" path="res://Audio/blade-cut-1.wav" id="14_wtk1r"]
[ext_resource type="AudioStream" uid="uid://ch1you6rwmx40" path="res://Audio/bow-target.wav" id="15_xmgge"]
[ext_resource type="PackedScene" uid="uid://dqqxr6lpg1jk6" path="res://Prefabs/FX/FxEnemyHit.tscn" id="17_w0mqh"]
[ext_resource type="PackedScene" uid="uid://myloy3htblvq" path="res://Prefabs/FX/FxBloodSlash.tscn" id="20_3wa7t"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_3dud8"]
radius = 0.4

[node name="MobBlackRat" type="CharacterBody3D" node_paths=PackedStringArray("detection", "eyes", "navAgent", "health", "myFactions", "animation", "audio", "swordHitFx", "swordHitBloodFx", "collider")]
collision_layer = 2
collision_mask = 2067
script = ExtResource("1_46qau")
detection = NodePath("Detection")
eyes = NodePath("Eyes")
navAgent = NodePath("NavigationAgent3D")
health = NodePath("Health")
myFactions = [NodePath("Faction"), NodePath("Faction2")]
animation = NodePath("character-black-rat/AnimationPlayer")
audio = NodePath("RatAudio")
swordHitFx = NodePath("FxEnemyHit")
swordHitBloodFx = NodePath("FxBloodSlash")
collider = NodePath("CollisionShape3D")
maxSightRangeSqr = 625.0
moveRecalculatePathRange = 0.5
attackRangeSqr = 2.25
speed = 5.5
lookSpeed = 0.3

[node name="Health" type="Node" parent="." node_paths=PackedStringArray("rat")]
script = ExtResource("2_71lt1")
rat = NodePath("..")
hitPoints = 50.0
maxHitPoints = 50.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_3dud8")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true
height = 1.5
neighbor_distance = 5.0
max_neighbors = 5

[node name="character-black-rat" parent="." instance=ExtResource("3_ikkoo")]

[node name="Skeleton3D" parent="character-black-rat/character-armature" index="0"]
bones/0/position = Vector3(0.011291, -0.603326, 0.0598277)
bones/0/rotation = Quaternion(0.691404, 0.0178803, 0.0258836, 0.721783)
bones/0/scale = Vector3(1, 1, 1)
bones/1/rotation = Quaternion(0.999289, 0.0242867, -0.0150584, 0.0246169)
bones/1/scale = Vector3(1, 1, 1)
bones/2/rotation = Quaternion(-0.10917, -0.00558362, 0.0147276, 0.993898)
bones/3/rotation = Quaternion(-0.0321669, -0.011051, 0.0474875, 0.998293)
bones/4/rotation = Quaternion(0.0361362, -0.0433519, 0.0851443, 0.994769)
bones/5/rotation = Quaternion(1.91651e-10, -1.86265e-09, -2.79396e-09, 1)
bones/6/rotation = Quaternion(0.155546, 0.0756624, -0.120109, 0.977576)
bones/7/rotation = Quaternion(0.8835, 0.170774, -0.16542, 0.40361)
bones/8/position = Vector3(0.11329, 0.295535, -0.0750513)
bones/8/rotation = Quaternion(-7.97953e-07, -9.72213e-07, -0.707107, 0.707107)
bones/9/rotation = Quaternion(0.0670822, -4.42218e-09, -3.81105e-08, 0.997747)
bones/10/position = Vector3(0.0949482, 0.333222, 0.0974939)
bones/10/rotation = Quaternion(0.707106, 2.66901e-08, 1.41897e-07, 0.707108)
bones/11/scale = Vector3(1.8, 1.8, 1.8)
bones/12/rotation = Quaternion(0.155546, 0.0756624, -0.120109, 0.977576)
bones/13/rotation = Quaternion(0.8835, -0.170774, 0.16542, 0.40361)
bones/14/position = Vector3(-0.11329, 0.295535, -0.0750513)
bones/14/rotation = Quaternion(-9.72213e-07, 7.97952e-07, 0.707107, 0.707107)
bones/15/position = Vector3(-0.0949483, 0.333222, 0.0974937)
bones/15/rotation = Quaternion(0.707106, -1.41897e-07, -2.669e-08, 0.707108)
bones/16/scale = Vector3(1.8, 1.8, 1.8)
bones/17/rotation = Quaternion(-0.592921, -0.401357, -0.293825, 0.633265)
bones/17/scale = Vector3(1, 1, 1)
bones/18/rotation = Quaternion(-0.570608, -0.225371, 0.204454, 0.762766)
bones/19/rotation = Quaternion(0.452878, 0.0160346, 0.0453516, 0.890274)
bones/20/rotation = Quaternion(-0.105403, -0.0169788, 0.199058, 0.974155)
bones/21/rotation = Quaternion(-0.565019, -0.0952566, 0.0444092, 0.818356)
bones/21/scale = Vector3(1, 1, 1)
bones/22/rotation = Quaternion(-0.656635, 0.0955871, 0.0284209, 0.747587)
bones/23/rotation = Quaternion(-0.593688, -0.0594035, 0.0271477, 0.802041)
bones/23/scale = Vector3(1, 1, 1)
bones/24/rotation = Quaternion(-0.704035, 0.130149, 0.0421473, 0.696864)
bones/24/scale = Vector3(1, 1, 1)
bones/25/rotation = Quaternion(-0.581285, -0.0179243, -0.00771212, 0.813466)
bones/26/rotation = Quaternion(-0.729107, 0.0885577, 0.0346626, 0.67776)
bones/26/scale = Vector3(1, 1, 1)
bones/27/rotation = Quaternion(-0.669637, 0.0139277, 0.0233766, 0.74219)
bones/27/scale = Vector3(1, 1, 1)
bones/28/rotation = Quaternion(-0.535964, 0.397406, 0.226056, 0.709725)
bones/29/rotation = Quaternion(-0.614493, 0.232302, -0.248091, 0.711959)
bones/29/scale = Vector3(1, 1, 1)
bones/30/rotation = Quaternion(0.236787, -0.0174907, -0.0237121, 0.971115)
bones/31/rotation = Quaternion(-0.175723, 0.042177, -0.0847681, 0.979876)
bones/32/rotation = Quaternion(0.0783683, 0.0257586, -0.0255661, 0.996264)
bones/32/scale = Vector3(1, 1, 1)
bones/33/rotation = Quaternion(-0.150424, -0.0958404, 0.0275543, 0.983579)
bones/33/scale = Vector3(1, 1, 1)
bones/34/rotation = Quaternion(0.119394, 0.0186802, -0.0276649, 0.992286)
bones/34/scale = Vector3(1, 1, 1)
bones/35/rotation = Quaternion(-0.361582, -0.136069, 0.0141596, 0.922249)
bones/35/scale = Vector3(1, 1, 1)
bones/36/rotation = Quaternion(0.0892486, 0.0186743, -0.00604871, 0.995816)
bones/37/rotation = Quaternion(-0.478846, -0.0949661, -0.00504077, 0.872733)
bones/38/rotation = Quaternion(-0.167591, 0.0280743, 0.00230021, 0.985454)
bones/39/rotation = Quaternion(0.232878, -0.0205248, -0.0467124, 0.971167)
bones/40/rotation = Quaternion(0.0116737, -0.0337417, -0.030794, 0.998888)
bones/41/rotation = Quaternion(-0.215177, -0.0105837, -0.0229593, 0.976248)
bones/42/rotation = Quaternion(0.0182976, -0.00461788, 0.101635, 0.994643)
bones/43/rotation = Quaternion(0.449527, 0.225753, -0.0857977, 0.86)
bones/44/rotation = Quaternion(-0.532197, -0.0540551, 0.0409741, 0.843899)
bones/45/rotation = Quaternion(0.499989, -0.00821714, -0.0274602, 0.865557)
bones/46/rotation = Quaternion(-0.320798, 0.247294, -0.140386, 0.903452)
bones/46/scale = Vector3(1, 1, 1)
bones/47/rotation = Quaternion(0.39299, -0.378446, 0.079082, 0.834316)
bones/48/rotation = Quaternion(-0.514895, 0.0543748, -0.0392764, 0.854625)
bones/48/scale = Vector3(1, 1, 1)
bones/49/rotation = Quaternion(0.488089, 0.00798897, 0.0273101, 0.87233)
bones/50/rotation = Quaternion(-0.322636, -0.149486, 0.0307674, 0.934138)
bones/50/scale = Vector3(1, 1, 1)
bones/51/rotation = Quaternion(-0.314751, -0.351635, -0.230535, 0.850963)
bones/51/scale = Vector3(1, 1, 1)
bones/52/rotation = Quaternion(0.384874, -0.80443, -0.0433883, 0.450423)
bones/52/scale = Vector3(1, 1, 1)
bones/53/position = Vector3(0.281327, -0.863856, 1.15298)
bones/53/rotation = Quaternion(-0.665755, -0.35809, -0.316784, -0.572878)
bones/54/position = Vector3(0.448366, -1.07571, 0.571361)
bones/54/rotation = Quaternion(-0.706378, -0.0139991, -0.0320956, 0.706968)
bones/54/scale = Vector3(1, 1, 1)
bones/55/position = Vector3(0.571102, -0.925643, 0.0229856)
bones/55/rotation = Quaternion(-0.896735, -0.0490418, -0.0213783, -0.439323)
bones/55/scale = Vector3(1, 1, 1)
bones/56/position = Vector3(0.252739, -0.577675, -0.467195)
bones/56/rotation = Quaternion(0.0407275, 0.704659, 0.705933, -0.0587899)
bones/56/scale = Vector3(0.999999, 1, 1)
bones/57/position = Vector3(0.579931, -0.939698, 0.113243)
bones/57/rotation = Quaternion(-0.552158, 0.432188, 0.520369, -0.487393)
bones/58/rotation = Quaternion(0.707107, 2.63418e-09, 2.63418e-09, 0.707107)
bones/59/position = Vector3(-0.2047, -0.85735, 1.17216)
bones/59/rotation = Quaternion(-0.671757, 0.254783, 0.357586, -0.596625)
bones/60/position = Vector3(-0.458052, -1.05574, 0.744439)
bones/60/rotation = Quaternion(-0.706378, 0.0139991, 0.0320956, 0.706968)
bones/60/scale = Vector3(1, 1, 1)
bones/61/position = Vector3(-0.425835, -0.961496, 0.063566)
bones/61/rotation = Quaternion(0.73969, -0.0516699, 0.0985269, 0.663688)
bones/61/scale = Vector3(1, 1, 1)
bones/62/position = Vector3(-0.28196, -0.71908, -0.286953)
bones/62/rotation = Quaternion(-0.0407275, 0.704659, 0.705933, 0.0587899)
bones/62/scale = Vector3(0.999999, 1, 1)

[node name="weapon-sword" parent="character-black-rat/character-armature/Skeleton3D" index="0"]
transform = Transform3D(0.0848604, -0.995942, -0.0299763, -0.98452, -0.0884418, 0.151324, -0.153361, 0.0166709, -0.98803, 0.579931, -0.939698, 0.113243)

[node name="weapon-sword" parent="character-black-rat/character-armature/Skeleton3D/weapon-sword" index="0"]
surface_material_override/0 = ExtResource("4_5s7k5")

[node name="character-black-rat" parent="character-black-rat/character-armature/Skeleton3D" index="1"]
surface_material_override/0 = ExtResource("5_n14mk")
surface_material_override/1 = ExtResource("6_ib6tv")
surface_material_override/2 = ExtResource("7_ji3gt")

[node name="AnimationPlayer" parent="character-black-rat" index="1"]
process_mode = 1
playback_default_blend_time = 0.1

[node name="RatAudio" type="AudioStreamPlayer3D" parent="."]
max_distance = 30.0
script = ExtResource("8_cysva")
footsteps = Array[AudioStream]([ExtResource("9_r652e"), ExtResource("10_r6giy"), ExtResource("11_1mgdw"), ExtResource("12_fuy8d"), ExtResource("13_ofeey")])
swordHitSound = ExtResource("14_wtk1r")
swordSwingSound = ExtResource("15_xmgge")

[node name="Detection" type="RayCast3D" parent="." node_paths=PackedStringArray("myFaction")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 1555
script = ExtResource("3_rfqt5")
myFaction = NodePath("../Faction")
pointBlankRangeSqr = 2.0

[node name="Eyes" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 1555
script = ExtResource("4_yonai")

[node name="Faction" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, 0)
script = ExtResource("4_3600o")
faction = 2

[node name="Faction2" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0)
script = ExtResource("4_3600o")
faction = 2

[node name="FxEnemyHit" parent="." instance=ExtResource("17_w0mqh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.347548, -0.811844)
restartOnReady = false

[node name="FxBloodSlash" parent="." instance=ExtResource("20_3wa7t")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.347548, -1.01184)

[editable path="character-black-rat"]
