[gd_scene load_steps=23 format=3 uid="uid://dkw1hfkd0uses"]

[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRat.cs" id="1_46qau"]
[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRatHealth.cs" id="2_71lt1"]
[ext_resource type="PackedScene" uid="uid://b1euavai00lrc" path="res://Models/character-black-rat.glb" id="3_ikkoo"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobDetection.cs" id="3_rfqt5"]
[ext_resource type="Material" uid="uid://c568qsv5du0ld" path="res://Materials/WeaponSword.tres" id="4_5s7k5"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobFaction.cs" id="4_3600o"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobEyes.cs" id="4_yonai"]
[ext_resource type="Material" uid="uid://jdcotr5j1875" path="res://Materials/Characters/MobBlackRatRim.tres" id="5_n14mk"]
[ext_resource type="Material" uid="uid://bf425q6a5ouef" path="res://Materials/Characters/RatEyeGlow.tres" id="6_al5mj"]
[ext_resource type="Material" uid="uid://blq5nnks5d07c" path="res://Materials/Characters/MobBlackRatGearRim.tres" id="7_ji3gt"]
[ext_resource type="Script" path="res://C#/MobBlackRat/MobBlackRatAudio.cs" id="8_cysva"]
[ext_resource type="AudioStream" uid="uid://fd1mvgf6fbwf" path="res://Audio/melee-hit.wav" id="9_b23nn"]
[ext_resource type="AudioStream" uid="uid://cmhkmrb8ou7x8" path="res://Audio/melee-swing-1.wav" id="10_exf00"]
[ext_resource type="AudioStream" uid="uid://cym0cmomxa2op" path="res://Audio/melee-swing-2.wav" id="11_uacww"]
[ext_resource type="AudioStream" uid="uid://bj84b8rv1djd0" path="res://Audio/melee-swing-3.wav" id="12_3ag21"]
[ext_resource type="AudioStream" uid="uid://dmb5idc74qwjp" path="res://Audio/melee-swing-4.wav" id="13_pm2g0"]
[ext_resource type="AudioStream" uid="uid://dfoff2giqmbmh" path="res://Audio/melee-swing-5.wav" id="14_uia1m"]
[ext_resource type="PackedScene" uid="uid://dabnky0qnlvgu" path="res://Prefabs/CharacterFootsteps.tscn" id="16_rmund"]
[ext_resource type="PackedScene" uid="uid://dqqxr6lpg1jk6" path="res://Prefabs/FX/FxEnemyHit.tscn" id="17_w0mqh"]
[ext_resource type="PackedScene" uid="uid://myloy3htblvq" path="res://Prefabs/FX/FxBloodSlash.tscn" id="20_3wa7t"]
[ext_resource type="PackedScene" uid="uid://cq0tn2qmf50ap" path="res://Prefabs/CharacterWaterArea.tscn" id="21_ccxk3"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_3dud8"]
radius = 0.4

[node name="MobBlackRat" type="CharacterBody3D" node_paths=PackedStringArray("detection", "eyes", "navAgent", "health", "myFactions", "animation", "audio", "swordHitFx", "swordHitBloodFx", "collider")]
collision_layer = 2
collision_mask = 2067
script = ExtResource("1_46qau")
detection = NodePath("Detection")
eyes = NodePath("Eyes")
navAgent = NodePath("NavigationAgent3D")
health = NodePath("Health")
myFactions = [NodePath("Faction"), NodePath("Faction2")]
animation = NodePath("character-black-rat/AnimationPlayer")
audio = NodePath("RatAudio")
swordHitFx = NodePath("FxEnemyHit")
swordHitBloodFx = NodePath("FxBloodSlash")
collider = NodePath("CollisionShape3D")
attackDistanceSqr = 2.56
attackRangeSqr = 6.25

[node name="Health" type="Node" parent="." node_paths=PackedStringArray("rat")]
script = ExtResource("2_71lt1")
rat = NodePath("..")
hitPoints = 50.0
maxHitPoints = 50.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_3dud8")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
avoidance_enabled = true
height = 1.5
neighbor_distance = 5.0
max_neighbors = 5

[node name="character-black-rat" parent="." instance=ExtResource("3_ikkoo")]

[node name="Skeleton3D" parent="character-black-rat/character-armature" index="0"]
bones/0/position = Vector3(-0.0347994, 0.092925, 0.173081)
bones/0/rotation = Quaternion(0.982994, -0.00171255, 0.0373718, 0.179786)
bones/0/scale = Vector3(1, 1, 1)
bones/1/rotation = Quaternion(0.989922, -0.0307456, 0.113867, 0.0783843)
bones/1/scale = Vector3(1, 1, 1)
bones/2/rotation = Quaternion(0.0182747, 0.0420274, -0.0013458, 0.998948)
bones/3/rotation = Quaternion(0.0452642, -1.07937e-09, 1.3636e-08, 0.998975)
bones/4/rotation = Quaternion(-0.59954, -0.135185, 0.0323066, 0.788184)
bones/5/rotation = Quaternion(-0.157946, -8.48051e-08, 4.65363e-08, 0.987448)
bones/6/rotation = Quaternion(0.0493974, 0.100942, -0.0685652, 0.991297)
bones/7/rotation = Quaternion(0.732827, 0.103131, -0.450328, 0.499533)
bones/8/position = Vector3(0.0940231, 0.295535, -0.0750511)
bones/8/rotation = Quaternion(-7.97953e-07, -9.72213e-07, -0.707107, 0.707107)
bones/9/rotation = Quaternion(-0.157079, -4.72833e-09, -3.98862e-08, 0.987586)
bones/10/position = Vector3(0.0968204, 0.305978, 0.110795)
bones/10/rotation = Quaternion(0.707106, 2.66901e-08, 1.41897e-07, 0.707108)
bones/12/rotation = Quaternion(0.0493974, 0.100942, -0.0685652, 0.991297)
bones/13/rotation = Quaternion(0.732827, -0.103131, 0.450328, 0.499533)
bones/14/position = Vector3(-0.0940231, 0.295535, -0.0750513)
bones/14/rotation = Quaternion(-9.72213e-07, 7.97952e-07, 0.707107, 0.707107)
bones/15/position = Vector3(-0.0968205, 0.305978, 0.110795)
bones/15/rotation = Quaternion(0.707106, -1.41897e-07, -2.669e-08, 0.707108)
bones/17/rotation = Quaternion(-0.641234, -0.395864, -0.438272, 0.489927)
bones/17/scale = Vector3(1, 1, 1)
bones/18/rotation = Quaternion(-0.074674, -0.188278, 0.00290094, 0.979268)
bones/19/rotation = Quaternion(0.629683, 0.0139434, 0.0630571, 0.774164)
bones/20/rotation = Quaternion(-0.142353, 0.91859, -0.359469, -0.0819196)
bones/21/rotation = Quaternion(-0.565019, -0.0952566, 0.0444092, 0.818356)
bones/21/scale = Vector3(1, 1, 1)
bones/22/rotation = Quaternion(-0.656635, 0.095587, 0.0284209, 0.747587)
bones/23/rotation = Quaternion(-0.593688, -0.0594035, 0.0271477, 0.802041)
bones/23/scale = Vector3(1, 1, 1)
bones/24/rotation = Quaternion(-0.704035, 0.130149, 0.0421473, 0.696864)
bones/24/scale = Vector3(1, 1, 1)
bones/25/rotation = Quaternion(-0.581285, -0.0179243, -0.00771208, 0.813466)
bones/26/rotation = Quaternion(-0.729107, 0.0885576, 0.0346626, 0.67776)
bones/26/scale = Vector3(1, 1, 1)
bones/27/rotation = Quaternion(-0.669637, 0.0139277, 0.0233766, 0.74219)
bones/27/scale = Vector3(1, 1, 1)
bones/28/rotation = Quaternion(-0.51451, 0.429712, 0.360066, 0.64883)
bones/29/rotation = Quaternion(-0.191986, 0.48122, -0.560356, 0.646197)
bones/29/scale = Vector3(1, 1, 1)
bones/30/rotation = Quaternion(0.513276, -0.0154272, -0.0514, 0.856544)
bones/31/rotation = Quaternion(0.197513, -0.232008, 0.0455008, 0.951362)
bones/32/rotation = Quaternion(-0.0624771, 0.0290969, -0.0216907, 0.997386)
bones/32/scale = Vector3(1, 1, 1)
bones/33/rotation = Quaternion(-0.462557, -0.0995888, -0.0051617, 0.880964)
bones/33/scale = Vector3(1, 1, 1)
bones/34/rotation = Quaternion(-0.365235, 0.0295617, -0.0155046, 0.930317)
bones/34/scale = Vector3(1, 1, 1)
bones/35/rotation = Quaternion(-0.422389, -0.136711, 0.00503662, 0.896032)
bones/35/scale = Vector3(1, 1, 1)
bones/36/rotation = Quaternion(-0.414244, 0.0192249, 0.00396394, 0.909954)
bones/37/rotation = Quaternion(-0.588308, -0.0935032, -0.0173521, 0.803026)
bones/38/rotation = Quaternion(-0.690988, 0.00138902, -0.0223395, 0.72252)
bones/39/rotation = Quaternion(-0.246221, 0.112896, 0.0863699, 0.958734)
bones/40/rotation = Quaternion(-0.277793, -2.17595e-08, 1.02756e-07, 0.960641)
bones/41/rotation = Quaternion(-0.25755, -9.51782e-07, 2.96773e-07, 0.966265)
bones/42/rotation = Quaternion(-0.228011, 9.2624e-07, 2.49164e-07, 0.973659)
bones/43/rotation = Quaternion(0.456916, 0.0510326, -0.20544, 0.863955)
bones/44/rotation = Quaternion(-0.568039, -0.0533662, 0.0445671, 0.82006)
bones/45/rotation = Quaternion(0.524238, -0.00874599, -0.0276446, 0.851078)
bones/46/rotation = Quaternion(0.483782, 0.227363, 0.00381788, 0.845131)
bones/46/scale = Vector3(1, 1, 1)
bones/47/rotation = Quaternion(0.600255, 0.0592957, 0.106417, 0.790477)
bones/48/rotation = Quaternion(-0.603486, 0.0526001, -0.0481832, 0.794176)
bones/48/scale = Vector3(1, 1, 1)
bones/49/rotation = Quaternion(0.548178, 0.00931103, 0.0277375, 0.83585)
bones/50/rotation = Quaternion(0.35655, -0.20193, 0.167857, 0.896616)
bones/50/scale = Vector3(1, 1, 1)
bones/51/rotation = Quaternion(-0.455878, -0.306944, -0.287366, 0.784463)
bones/51/scale = Vector3(1, 1, 1)
bones/52/rotation = Quaternion(0.175479, -0.84056, 0.0860328, 0.505237)
bones/52/scale = Vector3(1, 1, 1)
bones/53/position = Vector3(0.432845, -0.954628, 0.322556)
bones/53/rotation = Quaternion(-0.695919, -0.107427, -0.125286, 0.698899)
bones/54/position = Vector3(0.365937, -0.465647, -0.263946)
bones/54/rotation = Quaternion(-0.706378, -0.0139991, -0.0320956, 0.706968)
bones/54/scale = Vector3(1, 1, 1)
bones/55/position = Vector3(0.465336, 0.475314, -0.513694)
bones/55/rotation = Quaternion(-0.103424, 0.46132, -0.831674, 0.291215)
bones/55/scale = Vector3(1, 1, 1)
bones/56/position = Vector3(0.507551, 0.211785, -0.118635)
bones/56/rotation = Quaternion(0.0407275, 0.704659, 0.705933, -0.0587899)
bones/56/scale = Vector3(0.999999, 1, 1)
bones/57/position = Vector3(0.470244, 0.474539, -0.577529)
bones/57/rotation = Quaternion(-0.61659, 0.277076, -0.358056, 0.644082)
bones/58/rotation = Quaternion(0.707107, 2.63418e-09, 2.63418e-09, 0.707107)
bones/59/position = Vector3(-0.341163, -0.954628, 0.0295805)
bones/59/rotation = Quaternion(-0.702306, 0.0642493, 0.082258, 0.704182)
bones/60/position = Vector3(-0.187308, -0.410991, -0.238595)
bones/60/rotation = Quaternion(-0.706378, 0.0139991, 0.0320956, 0.706968)
bones/60/scale = Vector3(1, 1, 1)
bones/61/position = Vector3(-0.304936, 0.191864, -0.440596)
bones/61/rotation = Quaternion(0.71104, 0.141368, 0.0667133, -0.685556)
bones/61/scale = Vector3(1, 1, 1)
bones/62/position = Vector3(-0.444547, 0.237024, -0.167256)
bones/62/rotation = Quaternion(-0.0407275, 0.704659, 0.705933, 0.0587899)
bones/62/scale = Vector3(0.999999, 1, 1)

[node name="weapon-sword" parent="character-black-rat/character-armature/Skeleton3D" index="0"]
transform = Transform3D(0.59005, 0.798467, -0.11955, -0.802919, 0.595852, 0.0167737, 0.0846271, 0.0860914, 0.992687, 0.470244, 0.474539, -0.577529)

[node name="weapon-sword" parent="character-black-rat/character-armature/Skeleton3D/weapon-sword" index="0"]
surface_material_override/0 = ExtResource("4_5s7k5")

[node name="character-black-rat" parent="character-black-rat/character-armature/Skeleton3D" index="1"]
surface_material_override/0 = ExtResource("5_n14mk")
surface_material_override/1 = ExtResource("6_al5mj")
surface_material_override/2 = ExtResource("7_ji3gt")

[node name="AnimationPlayer" parent="character-black-rat" index="1"]
process_mode = 1
playback_default_blend_time = 0.1

[node name="RatAudio" type="AudioStreamPlayer3D" parent="."]
unit_size = 2.0
max_distance = 30.0
max_polyphony = 2
attenuation_filter_cutoff_hz = 20500.0
script = ExtResource("8_cysva")
swordHitSound = ExtResource("9_b23nn")
swordSwingSounds = Array[AudioStream]([ExtResource("10_exf00"), ExtResource("11_uacww"), ExtResource("12_3ag21"), ExtResource("13_pm2g0"), ExtResource("14_uia1m")])

[node name="CharacterFootsteps" parent="." instance=ExtResource("16_rmund")]

[node name="CharacterWaterArea" parent="." node_paths=PackedStringArray("characterFeetAudioNode") instance=ExtResource("21_ccxk3")]
characterFeetAudioNode = NodePath("../CharacterFootsteps")

[node name="Detection" type="RayCast3D" parent="." node_paths=PackedStringArray("myFaction")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 9747
script = ExtResource("3_rfqt5")
myFaction = NodePath("../Faction")
pointBlankRangeSqr = 2.0

[node name="Eyes" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 9747
script = ExtResource("4_yonai")

[node name="Faction" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, 0)
script = ExtResource("4_3600o")
faction = 2

[node name="Faction2" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0)
script = ExtResource("4_3600o")
faction = 2

[node name="FxEnemyHit" parent="." instance=ExtResource("17_w0mqh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.347548, -1.01184)
restartOnReady = false

[node name="FxBloodSlash" parent="." instance=ExtResource("20_3wa7t")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.347548, -1.21184)

[editable path="character-black-rat"]
