[gd_scene load_steps=19 format=3 uid="uid://ci5w021qks137"]

[ext_resource type="Script" path="res://C#/MobWasp/MobWasp.cs" id="1_vbe2t"]
[ext_resource type="PackedScene" uid="uid://dmttw1vyk6xy4" path="res://Models/mob-wasp.glb" id="2_blq1i"]
[ext_resource type="PackedScene" uid="uid://wiit04fu1oww" path="res://Prefabs/FX/FxWaspDeath.tscn" id="2_hegcd"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobFaction.cs" id="2_xwl4h"]
[ext_resource type="Script" path="res://C#/Mob Tools/MobDetection.cs" id="3_muehp"]
[ext_resource type="Material" uid="uid://jpvogfgug5bt" path="res://Materials/MobWasp.tres" id="3_rexv1"]
[ext_resource type="PackedScene" uid="uid://b4nki4pgqmfl7" path="res://Prefabs/FX/FxWaspHit.tscn" id="4_72040"]
[ext_resource type="PackedScene" uid="uid://cyh65ty8moprq" path="res://Prefabs/Gibs/GibWaspAbdomen.tscn" id="6_k7c3p"]
[ext_resource type="Script" path="res://C#/GibsActivator.cs" id="6_nqxbr"]
[ext_resource type="PackedScene" uid="uid://brljsrtq78hv1" path="res://Prefabs/Gibs/GibWaspHead.tscn" id="7_hwvjs"]
[ext_resource type="AnimationNodeStateMachine" uid="uid://dep8gxxpuhvr2" path="res://Animation/MobWaspAnimationStateMachine.tres" id="7_w7xgh"]
[ext_resource type="PackedScene" uid="uid://b4iwcasvg6jw" path="res://Prefabs/Gibs/GibWaspMid.tscn" id="8_cmu72"]
[ext_resource type="PackedScene" uid="uid://dr67ajwiaqnkk" path="res://Prefabs/Gibs/GibWaspWingL.tscn" id="9_la8w6"]
[ext_resource type="PackedScene" uid="uid://cyp7usw06fqjr" path="res://Prefabs/Gibs/GibWaspWingR.tscn" id="10_633pr"]
[ext_resource type="PackedScene" uid="uid://b5bp34m33aba6" path="res://Prefabs/FX/FxWaspVenom.tscn" id="10_mche4"]
[ext_resource type="AudioStream" uid="uid://130buoernvce" path="res://Audio/mob-wasp-fly.wav" id="13_yyjne"]
[ext_resource type="Script" path="res://C#/Common/AudioTools3d.cs" id="14_82ttd"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_me2gy"]
radius = 0.2
height = 0.9

[node name="MobWasp" type="CharacterBody3D" node_paths=PackedStringArray("detection", "animation", "gibsActivator", "venomFx", "flyAudio")]
collision_layer = 512
collision_mask = 529
motion_mode = 1
script = ExtResource("1_vbe2t")
detection = NodePath("Detection")
animation = NodePath("AnimationTree")
gibsActivator = NodePath("Gibs")
venomFx = NodePath("FxWaspVenom")
flyAudio = NodePath("FlyAudio")
flySound = ExtResource("13_yyjne")
waspDeathFx = ExtResource("2_hegcd")
waspHitFx = ExtResource("4_72040")
lookSpeed = 5.0

[node name="mob-wasp" parent="." instance=ExtResource("2_blq1i")]

[node name="Skeleton3D" parent="mob-wasp/mob-wasp-armature" index="0"]
bones/0/rotation = Quaternion(-0.709027, 7.82908e-17, 7.87179e-17, 0.705181)
bones/1/rotation = Quaternion(0.707103, 0.00239782, 0.707103, 0.00239788)
bones/2/rotation = Quaternion(0.86248, 0.080688, 0.486181, -0.115092)
bones/3/rotation = Quaternion(-0.571503, -0.407778, -0.406228, 0.584876)
bones/4/rotation = Quaternion(-0.491404, -0.360976, -0.297788, 0.734534)
bones/5/position = Vector3(0.0334444, -0.111316, -0.0552482)
bones/5/rotation = Quaternion(0.784918, 0.184207, 0.513509, -0.293734)
bones/6/rotation = Quaternion(0.86248, -0.080688, -0.486181, -0.115092)
bones/7/rotation = Quaternion(-0.587828, 0.393558, 0.425067, 0.564703)
bones/8/rotation = Quaternion(-0.501727, 0.353008, 0.324876, 0.719799)
bones/9/position = Vector3(-0.0334444, -0.111316, -0.0552482)
bones/9/rotation = Quaternion(0.780247, -0.203636, -0.50537, -0.307161)

[node name="mob-wasp2" parent="mob-wasp/mob-wasp-armature/Skeleton3D" index="0"]
surface_material_override/0 = ExtResource("3_rexv1")

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = ExtResource("7_w7xgh")
anim_player = NodePath("../mob-wasp/AnimationPlayer")
active = true
parameters/conditions/fly = false
parameters/conditions/hit = false
parameters/conditions/land = false
parameters/Fly/blend_position = 0.0
parameters/Idle/OneShot/active = false
parameters/Idle/OneShot/internal_active = false
parameters/Idle/OneShot/request = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
shape = SubResource("CapsuleShape3D_me2gy")

[node name="Faction" type="Node3D" parent="."]
script = ExtResource("2_xwl4h")

[node name="Detection" type="RayCast3D" parent="." node_paths=PackedStringArray("myFaction")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.17214)
enabled = false
target_position = Vector3(0, 0, -1)
collision_mask = 3
script = ExtResource("3_muehp")
myFaction = NodePath("../Faction")
pointBlankRangeSqr = 1.0

[node name="FxWaspVenom" parent="." instance=ExtResource("10_mche4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.142169, -0.364001)

[node name="Gibs" type="Node3D" parent="."]
visible = false
script = ExtResource("6_nqxbr")
speed = 4.0
randomDirectionRadius = 3.0
maxRotationSpeed = 6.0

[node name="GibWaspAbdomen" parent="Gibs" instance=ExtResource("6_k7c3p")]
transform = Transform3D(1, 0, 0, 0, 0.719073, -0.694935, 0, 0.694935, 0.719073, 0, -0.178034, 0.265597)

[node name="GibWaspHead" parent="Gibs" instance=ExtResource("7_hwvjs")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.082751, -0.24326)

[node name="GibWaspMid" parent="Gibs" instance=ExtResource("8_cmu72")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0874378, 0.00707321)

[node name="GibWaspWingL" parent="Gibs" instance=ExtResource("9_la8w6")]
transform = Transform3D(0.939693, 0, -0.34202, -0.0885213, 0.965926, -0.24321, 0.330366, 0.258819, 0.907673, -0.2, 0.126537, 0.157943)

[node name="GibWaspWingR" parent="Gibs" instance=ExtResource("10_633pr")]
transform = Transform3D(0.939693, 0, 0.34202, 0.0885213, 0.965926, -0.24321, -0.330366, 0.258819, 0.907673, 0.2, 0.127, 0.158)

[node name="FlyAudio" type="AudioStreamPlayer3D" parent="."]
max_distance = 30.0
max_polyphony = 2
script = ExtResource("14_82ttd")

[editable path="mob-wasp"]
